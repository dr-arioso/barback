id: stashkit.skills
name: Skill Subsystem
type: subsystem
description: >
  Skills are composable units that operate on specific signal types (text, barcode, image,
  user input, partial entities, etc.) and propose field-level changes, often with confidence
  and provenance information, for resolvers to merge.

traits:
  - composable
  - atomic
  - reusable
  - signal_processor

fields:
  responsibilities:
    - Extract information from input signals such as text, barcodes, or images.
    - Transform or normalize values (e.g. canonicalizing product names or brands).
    - Query external APIs or databases for enrichment.
    - Interact with users to request missing or clarifying information.
    - Propose updates to one or more fields on a partial entity.
  typical_fields:
    - skill_id
    - signal_type
    - produces_fields
    - domain_specific
    - requires_context

api:
  public_methods:
    - name: apply
      description: >
        Apply the skill to the given input (and optional context), returning proposed
        field updates with optional confidence and provenance.
      params:
        - input
        - context
      returns: "ProposedChanges"

  internal_methods:
    - name: _validate
      description: "Internal check for input structure and type prior to application."

  properties:
    - name: skill_id
      description: "Unique identifier used for registration and selection by resolvers."
    - name: signal_type
      description: "Signal type accepted by this skill (e.g. text, barcode, image, user_input, partial_entity)."
    - name: produces_fields
      description: "Field names that this skill may propose or update on the partial entity."
    - name: domain_specific
      description: "Whether the skill is tightly bound to a particular domain or generally reusable."
    - name: requires_context
      description: "Whether the skill requires contextual information (e.g. Dex handle, configuration, or stash)."

  events: []
